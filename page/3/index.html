<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Simple</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="技术的终极目标是简洁">
<meta property="og:type" content="website">
<meta property="og:title" content="Simple">
<meta property="og:url" content="cedar-renjun.github.io/page/3/index.html">
<meta property="og:site_name" content="Simple">
<meta property="og:description" content="技术的终极目标是简洁">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Simple">
<meta name="twitter:description" content="技术的终极目标是简洁">
  
    <link rel="alternative" href="/atom.xml" title="Simple" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="null" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Do one thing and do it well</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/cedar-renjun" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/1995742315/profile?topnav=1&wvr=6" title="weibo">weibo</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/BLE4-0/" style="font-size: 10px;">BLE4.0</a> <a href="/tags/CC26xx/" style="font-size: 10px;">CC26xx</a> <a href="/tags/Debugger/" style="font-size: 12.5px;">Debugger</a> <a href="/tags/ELF/" style="font-size: 15px;">ELF</a> <a href="/tags/GPIO/" style="font-size: 10px;">GPIO</a> <a href="/tags/Hacker/" style="font-size: 12.5px;">Hacker</a> <a href="/tags/IAR/" style="font-size: 10px;">IAR</a> <a href="/tags/IDA/" style="font-size: 12.5px;">IDA</a> <a href="/tags/Jlink/" style="font-size: 10px;">Jlink</a> <a href="/tags/M1/" style="font-size: 10px;">M1</a> <a href="/tags/NFC/" style="font-size: 12.5px;">NFC</a> <a href="/tags/PN532/" style="font-size: 10px;">PN532</a> <a href="/tags/RFID/" style="font-size: 10px;">RFID</a> <a href="/tags/STM32/" style="font-size: 10px;">STM32</a> <a href="/tags/STM32F7/" style="font-size: 10px;">STM32F7</a> <a href="/tags/TI/" style="font-size: 10px;">TI</a> <a href="/tags/USB/" style="font-size: 20px;">USB</a> <a href="/tags/elua/" style="font-size: 10px;">elua</a> <a href="/tags/lua/" style="font-size: 10px;">lua</a> <a href="/tags/sublime-text/" style="font-size: 10px;">sublime text</a> <a href="/tags/微信订阅号/" style="font-size: 17.5px;">微信订阅号</a> <a href="/tags/树莓派/" style="font-size: 12.5px;">树莓派</a> <a href="/tags/示波器/" style="font-size: 10px;">示波器</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.miaoxiong.net/">喵兄</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://ahnniu.github.io/">牛工</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">Cedar, 嵌入式软件工程师，玩过各种MCU，熟悉无线协议栈，USB，RTOS，半个软件架构师，最近在折腾调试器. QQ: 819280802</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Do one thing and do it well</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="null" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Do one thing and do it well</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/cedar-renjun" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/1995742315/profile?topnav=1&wvr=6" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Use-gdb-debug-cortex-m-mcu-via-jlink-gdb-server" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/04/Use-gdb-debug-cortex-m-mcu-via-jlink-gdb-server/" class="article-date">
  	<time datetime="2015-10-04T12:17:54.000Z" itemprop="datePublished">2015-10-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/04/Use-gdb-debug-cortex-m-mcu-via-jlink-gdb-server/">用gdb调试Cortex-M系列芯片</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="准备工作">准备工作</h3><p>本文假设读者</p>
<ol>
<li>已经熟悉arm gcc工具链</li>
<li>已经在win中安装好mingw或者arm-none-eabi-gcc工具</li>
<li>具有合适的代码工程和编译脚本，且编译输出elf文件时，已添加<code>-g</code>选项来生成调试信息</li>
<li>安装jlink调试工具和对应驱动</li>
<li>有对应的硬件电路</li>
</ol>
<p>如果其中任何一项不满足，请自行google相关文档，完成基础准备工作</p>
<h3 id="启动jlink_gdb_server">启动jlink gdb server</h3><ol>
<li>开始 -&gt; SEGGER -&gt; Jlink V4.90e -&gt; Jlink GDB Server</li>
<li>Jlink会显示GDB config配置选项，如下图配置<br><img src="http://cedar-renjun.github.io/images/2015/10/4/1.png" alt="GDB Server配置选项"></li>
<li>点击OK，启动GDB server，在J-Link一栏会显示<code>Connected</code>字符，表示成功连接硬件，如下图所示<br><img src="http://cedar-renjun.github.io/images/2015/10/4/2.png" alt="GDB Server配置完成"></li>
</ol>
<h3 id="启动GDB">启动GDB</h3><ol>
<li>打开CMD，输入<code>arm-none-eabi-gdb</code>，打开后，如下图所示；如果没有显示对应信息，属于没有配置环境变量的path，请添加gcc<br>tools的路径进去</li>
<li>输入<code>file Demo.elf</code>加载调试文件，这里以<code>Demo.elf</code>为例，实际你可以替换为自己的elf文件</li>
<li>输入<code>target remote localhost:2331</code>，连接gdb server，连接成功后，会在Jlink GDB server中显示对应的状态，如下所示<br><img src="http://cedar-renjun.github.io/images/2015/10/4/3.png" alt="GDB Server连接成功"></li>
<li>输入<code>monitor reset</code>来复位MCU，从而让MCU处于确定的状态</li>
<li>输入<code>load</code>往MCU中加载调试文件，也就是常见的烧录过程</li>
<li>输入<code>break main</code>设置main断点，让MCU执行到main中停止</li>
</ol>
<p>下面是使用Power shell的交互过程</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">PS C:\&gt; arm-none-eabi-gdb</span><br><span class="line">GNU gdb (GNU Tools <span class="keyword">for</span> ARM Embedded Processors) <span class="number">7.8</span>.<span class="number">0.20150604</span>-cvs</span><br><span class="line">Copyright (C) <span class="number">2014</span> Free Software Foundation, Inc.</span><br><span class="line">License GPLv3+: GNU GPL version <span class="number">3</span> or later &lt;http://gnu.org/licenses/gpl.html&gt;</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.  Type <span class="string">"show copying"</span></span><br><span class="line">and <span class="string">"show warranty"</span> <span class="keyword">for</span> details.</span><br><span class="line">This GDB was configured as <span class="string">"--host=i686-w64-mingw32 --target=arm-none-eabi"</span>.</span><br><span class="line">Type <span class="string">"show configuration"</span> <span class="keyword">for</span> configuration details.</span><br><span class="line">For bug reporting instructions, please see:</span><br><span class="line">&lt;http://www.gnu.org/software/gdb/bugs/&gt;.</span><br><span class="line">Find the GDB manual and other documentation resources online at:</span><br><span class="line">&lt;http://www.gnu.org/software/gdb/documentation/&gt;.</span><br><span class="line">For <span class="built_in">help</span>, <span class="built_in">type</span> <span class="string">"help"</span>.</span><br><span class="line">Type <span class="string">"apropos word"</span> to search <span class="keyword">for</span> commands related to <span class="string">"word"</span>.</span><br><span class="line">(gdb) file Demo.elf</span><br><span class="line">Reading symbols from Demo.elf...done.</span><br><span class="line">(gdb) target remote localhost:<span class="number">2331</span></span><br><span class="line">Remote debugging using localhost:<span class="number">2331</span></span><br><span class="line"><span class="number">0</span>x00000000 <span class="keyword">in</span> ?? ()</span><br><span class="line">(gdb) monitor reset</span><br><span class="line">Resetting target</span><br><span class="line">(gdb) load</span><br><span class="line">Loading section .text, size <span class="number">0</span>x434 lma <span class="number">0</span>x8000000</span><br><span class="line">Loading section .data, size <span class="number">0</span>x14 lma <span class="number">0</span>x8000434</span><br><span class="line">Start address <span class="number">0</span>x80003ec, load size <span class="number">1096</span></span><br><span class="line">Transfer rate: <span class="number">59</span> KB/sec, <span class="number">548</span> bytes/write.</span><br><span class="line">(gdb) <span class="built_in">break</span> main</span><br><span class="line">Breakpoint <span class="number">1</span> at <span class="number">0</span>x8000112: file src\App\main.c, line <span class="number">27</span>.</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Breakpoint <span class="number">1</span>, main () at src\App\main.c:<span class="number">27</span></span><br><span class="line"><span class="number">27</span>              int i = <span class="number">0</span>;</span><br><span class="line">(gdb) l</span><br><span class="line"><span class="number">22</span>      /* Includes ------------------------------------------------------------------*/</span><br><span class="line"><span class="number">23</span>      <span class="comment">#include "stm32f10x.h"</span></span><br><span class="line"><span class="number">24</span>      <span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="number">25</span>      int main(void)</span><br><span class="line"><span class="number">26</span>      &#123;</span><br><span class="line"><span class="number">27</span>              int i = <span class="number">0</span>;</span><br><span class="line"><span class="number">28</span></span><br><span class="line"><span class="number">29</span></span><br><span class="line"><span class="number">30</span>              <span class="keyword">for</span>(int m = <span class="number">0</span>; m &lt; <span class="number">100</span>; m++)</span><br><span class="line"><span class="number">31</span>              &#123;</span><br><span class="line">(gdb) l</span><br><span class="line"><span class="number">32</span>                      i = m + i;</span><br><span class="line"><span class="number">33</span>              &#125;</span><br><span class="line"><span class="number">34</span></span><br><span class="line"><span class="number">35</span>              <span class="built_in">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="number">36</span>      &#125;</span><br><span class="line">(gdb) s</span><br><span class="line"><span class="number">30</span>              <span class="keyword">for</span>(int m = <span class="number">0</span>; m &lt; <span class="number">100</span>; m++)</span><br><span class="line">(gdb) s</span><br><span class="line"><span class="number">32</span>                      i = m + i;</span><br><span class="line">(gdb) s</span><br><span class="line"><span class="number">30</span>              <span class="keyword">for</span>(int m = <span class="number">0</span>; m &lt; <span class="number">100</span>; m++)</span><br><span class="line">(gdb) s</span><br><span class="line"><span class="number">32</span>                      i = m + i;</span><br><span class="line">(gdb) p m</span><br><span class="line"><span class="variable">$1</span> = <span class="number">1</span></span><br><span class="line">(gdb) <span class="built_in">break</span> <span class="number">35</span></span><br><span class="line">Breakpoint <span class="number">2</span> at <span class="number">0</span>x8000130: file src\App\main.c, line <span class="number">35</span>.</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Breakpoint <span class="number">2</span>, main () at src\App\main.c:<span class="number">35</span></span><br><span class="line"><span class="number">35</span>              <span class="built_in">return</span> <span class="number">0</span>;</span><br><span class="line">(gdb) p i</span><br><span class="line"><span class="variable">$2</span> = <span class="number">4950</span></span><br><span class="line">(gdb) q</span><br><span class="line">A debugging session is active.</span><br><span class="line"></span><br><span class="line">        Inferior <span class="number">1</span> [Remote target] will be killed.</span><br><span class="line"></span><br><span class="line">Quit anyway? (y or n) y</span><br></pre></td></tr></table></figure>
<h3 id="参考资料：">参考资料：</h3><ol>
<li>gcc manual</li>
<li>gdb manual</li>
<li>jlink user manual, charapter 3.3 J-link GDB Server</li>
<li>scons user guide</li>
<li>scons manual</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Jlink/">Jlink</a><a class="article-category-link" href="/categories/Jlink/gcc/">gcc</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Create-your-IAR-project-template" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/02/Create-your-IAR-project-template/" class="article-date">
  	<time datetime="2015-10-02T05:29:55.000Z" itemprop="datePublished">2015-10-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/02/Create-your-IAR-project-template/">创建IAR模版工程</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言">前言</h3><p>如果你用过IAR，用过STM32，那一定会知道创建新STM32工程时有多痛苦，创建空工程，添加group，添加代码，添加宏定义，选择STM32芯片等步骤<br>每次新建工程，都需要重新来一遍，那有没有更简单的步骤呢？答案是yes！</p>
<p>假设我们需要在IAR中添加一个STM32F4的工程模版，那么所需要的东西如下：</p>
<ol>
<li>IAR 7.20 For ARM</li>
<li>Win7</li>
<li>STM32F4xx 标准库文件</li>
</ol>
<p>基本步骤包括</p>
<ol>
<li>创建IAR标准模版工程</li>
<li>把模版放到IAR安装目录（patch）</li>
<li>修改配置文件</li>
</ol>
<p>很简单，让我们一步一步来实现这个功能</p>
<h3 id="1_创建IAR标准工程">1 创建IAR标准工程</h3><p>像平时一样，根据自己的工程管理习惯，用IAR创建一个工程，然后调整代码和相关工程配置项，调试编译通过</p>
<p><strong>特别注意：创建工程时，需要保证IAR工程文件在最顶层目录</strong><br><img src="http://cedar-renjun.github.io/images/2015/10/3/1.png" alt="工程目录组织结构"></p>
<p>创建好的目录如下所示</p>
<p><img src="http://cedar-renjun.github.io/images/2015/10/3/0.png" alt="创建好的IAR工程"></p>
<h3 id="2_添加模版工程">2 添加模版工程</h3><p>接下来，我们需要将标准工程修改为模版工程</p>
<ol>
<li>删除<code>Debug</code>和<code>settings</code>目录，某些情况下，还有存在<code>Release</code>目录，请删除</li>
<li>删除<code>*.dep</code>, <code>*.ewt</code>, <code>*.ewd</code>,<code>*.eww</code>四种IAR工程文件，只保留<code>*.ewp</code>文件<br>关于上面5种文件的详细分析，请参考本博客上篇文章<a href="http://cedar-renjun.github.io/2015/10/02/IAR-projects-template/">IAR工程文件分析</a></li>
<li>修改<code>*.ewp</code>文件名为<code>templproj.ewp</code></li>
</ol>
<p>至此，修改完成，如下图所示<br><img src="http://cedar-renjun.github.io/images/2015/10/3/3.png" alt="修改好的IAR工程"></p>
<h3 id="3_修改配置文件">3 修改配置文件</h3><p>接下来，我们将这个模块添加到IAR工程中</p>
<ol>
<li>在桌面新建一个临时文件夹，名为<code>tmp</code></li>
<li>在<code>tmp</code>中新建目录<code>STM32</code>,</li>
<li>在<code>STM32</code>中新建目录<code>F4xx</code></li>
<li><p>将我们创建的模版工程拷入<code>F4xx</code>目录，如下所示</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">│ </span><br><span class="line">└─STM32</span><br><span class="line">    │ </span><br><span class="line">    └─F4xx</span><br><span class="line">        │ templproj.ewp</span><br><span class="line">        ├─App</span><br><span class="line">        └─Libs</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入<code>C:\Program Files\IAR Systems\Embedded Workbench 7.2\arm\config\template\project</code>目录，拷贝<code>C.ENU.projtempl</code>文件到<code>STM32</code>和<code>F4xx</code>同级目录，然后修改名字为<code>STM32.ENU.projtempl</code>,<code>F4xx.ENU.projtempl</code>，修改完成后，结构如下所示</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">│ STM32.ENU.projtempl</span><br><span class="line">└─STM32</span><br><span class="line">    │ F4xx.ENU.projtempl</span><br><span class="line">    └─F4xx</span><br><span class="line">        │ templproj.ewp</span><br><span class="line">        ├─App</span><br><span class="line">        └─Libs</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>特别注意：<code>projtempl</code>的名字一定要和目录名字完全一致，不然IAR找不到对应的文件夹</strong><br><code>*.projtempl</code>文件用于展示工程模版的基本信息，比如名字和简介什么的<br>下面我们分别将两个文件修改为下面样式<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--STM32.ENU.projtempl file--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">templategroup</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">description</span>&gt;</span>STM32 Project template for f0/1/2/4/7 mcu<span class="tag">&lt;/<span class="title">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">displayname</span>&gt;</span>STM32<span class="tag">&lt;/<span class="title">displayname</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">templategroup</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--F4xx.ENU.projtempl file--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">templategroup</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">description</span>&gt;</span>STM32 Project template for f4xx mcu<span class="tag">&lt;/<span class="title">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">displayname</span>&gt;</span>F4xx<span class="tag">&lt;/<span class="title">displayname</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">templategroup</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="测试">测试</h3><p>上面几个步骤，看起来很复杂，但实际操作起来，也挺简单的</p>
<p>下面我们来测试效果，将上面<code>tmp</code>文件中所有文件，拷贝至<code>C:\Program Files\IAR Systems\Embedded Workbench 7.2\arm\config\template\project</code>目录</p>
<p>在IAR中，新建工程，这时便会出现STM32模版工程，如下图所示<br><img src="http://cedar-renjun.github.io/images/2015/10/3/6.png" alt="选择工程模版"></p>
<p>选择STM32，然后选择F4，新建工程，完成后如下图所示，finish<br><img src="http://cedar-renjun.github.io/images/2015/10/3/7.png" alt="新建的IAR工程"></p>
<h3 id="后记">后记</h3><p>在IAR 7.2上测试时，时常出现不可复现的bug，也许和破解有关系，具体表现为<br>在显示层次模版目录时，无法显示子目录；UI层次上就是新建IAR工程时，能显示STM32模版，但不能显示F4xx模版信息</p>
<p>暂时无解</p>
<p>规避方案：直接复制IAR模版文件，然后适当修改即可，千万不要重写<code>templproj</code>!!!</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IAR/">IAR</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-IAR-projects-template" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/02/IAR-projects-template/" class="article-date">
  	<time datetime="2015-10-02T02:35:55.000Z" itemprop="datePublished">2015-10-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/02/IAR-projects-template/">IAR 工程文件分析</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>注意：下文以IAR 7.2 For ARM版本来分析XML工程文件</p>
<h3 id="初衷">初衷</h3><p>IAR工程中添加文件，一直很麻烦，最近发现RTT用Scons能自动生成IAR模版，并添加源文件，为此分析了IAR工程管理结构，重点在于源文件管理结构</p>
<h3 id="构建语法">构建语法</h3><p>采用标准XML形式来构建工程</p>
<p>在新建工程后，IAR默认包含debug和release两个模版，在XML文件中，有所体现，我们可以在XML中删掉release的配置信息，减轻我们分析的负担</p>
<h3 id="IAR_工程结构">IAR 工程结构</h3><ul>
<li>*.ewp IAR工程文件，包含配置项和文件列表</li>
<li>*.ewt IAR配置文件，包含C-STAT和RuntimeChecking的信息</li>
<li>*.dep IAR调试信息配置，主要用于描述源文件和obj文件的关联信息</li>
<li>*.eww IAR workspace，用于管理多个project</li>
<li>*.ewd 调试相关，比如选择的调试器和调试器ID等等</li>
</ul>
<p>简单介绍一下用途<br>1）如果只是保留基本工程信息，不需要调试器和链接器的信息，只保留<code>eww</code>和<code>ewp</code>文件即可<br>2）如果需要保存链接器和调试器信息，保留<code>ewp</code>, <code>ewt</code>, <code>dep</code>, <code>eww</code>四个文件即可<br>3）<code>ewt</code>主要包含一些静态检查和动态检查，可以不用这些配置项</p>
<p>也就是说，在复制IAR工程时，只需要保留这几个文件，其它的文件（夹）都可以删掉，比如setting, Debug，Release文件夹</p>
<p>因为分析IAR主要是为了自动生成模版文件，所以下面重点分析<code>ewp</code>文件结构</p>
<h3 id="ewp文件分析">ewp文件分析</h3><p>打开文件，可以看到顶层结构为<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">project</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">fileVersion</span>&gt;</span>2<span class="tag">&lt;/<span class="title">fileVersion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">configuration</span>&gt;</span>Debug工程配置<span class="tag">&lt;/<span class="title">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">configuration</span>&gt;</span>Release工程配置<span class="tag">&lt;/<span class="title">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">file</span>&gt;</span>工程文件结构<span class="tag">&lt;/<span class="title">file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">project</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这里加注了行号，第3/4行为工程具体配置，包括<code>Debug</code>和<code>Release</code>版本配置，还可以添加其它配置页，为了简化分析，我删掉了<code>Release</code>配置项，再次打开IAR工程，如下所示：</p>
<p>第5行是工程文件目录结构，也是我们重点分析的部分，主要分为两块</p>
<ol>
<li>单个文件</li>
<li>目录组织结构</li>
</ol>
<p>我在创建IAR工程时，只包含一个main.c文件，XML对应结构如下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">name</span>&gt;</span>$PROJ_DIR$\main.c<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>尝试添加两个源文件<code>test.c</code> <code>test.h</code>, XML 结构变成下面的形式<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">name</span>&gt;</span>$PROJ_DIR$\main.c<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">name</span>&gt;</span>$PROJ_DIR$\test.c<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">name</span>&gt;</span>$PROJ_DIR$\test.h<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">file</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>可见每一个文件对应一个file结构，我们尝试新建一个group，然后将test.c和test.h文件放到里面</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">name</span>&gt;</span>test<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">name</span>&gt;</span>$PROJ_DIR$\test.c<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">name</span>&gt;</span>$PROJ_DIR$\test.h<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">name</span>&gt;</span>$PROJ_DIR$\main.c<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">file</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可见增加了一个<code>group</code>结构，并用<code>name</code>来表示group的名字<br>OK，分析到这里，我们就可以利用python来编写脚本自动添加文件到IAR工程中了</p>
<p>至于<code>Debug</code>配置项的细节信息，等有机会慢慢研究</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IAR/">IAR</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Introduce-Raspberry-2B" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/01/Introduce-Raspberry-2B/" class="article-date">
  	<time datetime="2015-10-01T13:25:40.000Z" itemprop="datePublished">2015-10-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/01/Introduce-Raspberry-2B/">“树莓派2B＋学习笔记-开篇”</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言">前言</h2><p>github这个博客好久更新了，大概有一年吧，期间各种事情，其实主要原因还是自己懒<br>终究发现做技术的，还是要常常做一些笔记，不然就会容易忘记，所以今天重抄旧业，将hexo升级到了3.1.0</p>
<p>接下来会不断更新蓝牙4.0和linux，USB相关知识</p>
<p>先拿树莓派开刀吧^_^</p>
<h2 id="1_致谢">1 致谢</h2><p>最近一直想学linux驱动编程和学习内核，刚好得到一块儿树莓派2B，所以准备用心搞一下<br>在此特意感谢21ic 小跑堂美女和may美女</p>
<p><img src="http://cedar-renjun.github.io/images/2015/10/1/Pi_2_Model_B.png" alt="树莓派图片"></p>
<h2 id="2_树莓派2B升级了什么">2 树莓派2B升级了什么</h2><p>下面是官方网站展示的2B的性能参数：</p>
<ul>
<li>A 900MHz quad-core ARM Cortex-A7 CPU</li>
<li>1GB RAM</li>
<li>4 USB ports</li>
<li>40 GPIO pins</li>
<li>Full HDMI port</li>
<li>Ethernet port</li>
<li>Combined 3.5mm audio jack and composite video</li>
<li>Camera interface (CSI)</li>
<li>Display interface (DSI)</li>
<li>Micro SD card slot</li>
<li>VideoCore IV 3D graphics core</li>
</ul>
<p>相比于前代的树莓派，2B采用TF卡，尺寸更小，也去掉了不常用的RCA接口（俗称AV接口），完全采用HDMI接口<br>这么改，最大的好处就是树莓派形状变得很整齐，不再像原来那样突起一部分</p>
<p>从处理器来说，将原来的高通BCM2835更新到了BCM2836，增大RAM到1G，估计你对这些也不太感冒，只要知道速度提高了6倍就好了</p>
<p>因为处理器架构从ARM7TMDI变成了4核A7，所以能跑标准的操作系统，比如安卓或者ubuntu或者win10</p>
<p>大致看了win10烧录内核的步骤，看到“首先你需要一台运行win10的笔记本”，看到这里就没继续看了，哪位有兴趣的可以自己根据官方博客来实战游戏</p>
<p><a href="https://www.raspberrypi.org/blog/windows-10-for-iot/" target="_blank" rel="external">https://www.raspberrypi.org/blog/windows-10-for-iot/</a> <br><br><a href="https://dev.windows.com/zh-cn/iot" target="_blank" rel="external">https://dev.windows.com/zh-cn/iot</a> <br></p>
<p>对了，树莓派2B支持DSI显示接口和CSI相机接口，从而可以直接高速视频输入和屏幕输出<br>这个有什么用呢？理论上来说，你可以拿树莓派做一个平板电脑</p>
<p>树莓派的简单介绍到这里，接下来介绍烧录系统，更新内核，跑opencv做人脸识别</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/树莓派/">树莓派</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-coding-standard" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/16/coding-standard/" class="article-date">
  	<time datetime="2014-11-16T08:47:24.000Z" itemprop="datePublished">2014-11-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/16/coding-standard/">C语言编码规范</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="0_头文件注释">0 头文件注释</h2><p><strong>原则</strong><br>用于说明本文件的用途，作者，协议等信息</p>
<p><strong>示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//******************************************************************************************</span></span><br><span class="line"><span class="comment">//!</span></span><br><span class="line"><span class="comment">//! \file   FIFO.h</span></span><br><span class="line"><span class="comment">//! \brief  Genernal FIFO Model Interface.</span></span><br><span class="line"><span class="comment">//!         You can use uniform FIFO Model to manager Any type of data element.</span></span><br><span class="line"><span class="comment">//! \author cedar</span></span><br><span class="line"><span class="comment">//! \date   2013-12-16</span></span><br><span class="line"><span class="comment">//! \email  xuesong5825718@gmail.com</span></span><br><span class="line"><span class="comment">//!</span></span><br><span class="line"><span class="comment">//! \license</span></span><br><span class="line"><span class="comment">//!</span></span><br><span class="line"><span class="comment">//! Copyright (c) 2013 Cedar MIT License</span></span><br><span class="line"><span class="comment">//!</span></span><br><span class="line"><span class="comment">//! Permission is hereby granted, free of charge, to any person obtaining a copy</span></span><br><span class="line"><span class="comment">//! of this software and associated documentation files (the "Software"), to deal</span></span><br><span class="line"><span class="comment">//! in the Software without restriction, including without limitation the rights to</span></span><br><span class="line"><span class="comment">//! use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of</span></span><br><span class="line"><span class="comment">//! the Software, and to permit persons to whom the Software is furnished to do so,</span></span><br><span class="line"><span class="comment">//! subject to the following conditions:</span></span><br><span class="line"><span class="comment">//!</span></span><br><span class="line"><span class="comment">//! The above copyright notice and this permission notice shall be included in all</span></span><br><span class="line"><span class="comment">//! copies or substantial portions of the Software.</span></span><br><span class="line"><span class="comment">//!</span></span><br><span class="line"><span class="comment">//! THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></span><br><span class="line"><span class="comment">//! IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></span><br><span class="line"><span class="comment">//! FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></span><br><span class="line"><span class="comment">//! AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></span><br><span class="line"><span class="comment">//! LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></span><br><span class="line"><span class="comment">//! OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS</span></span><br><span class="line"><span class="comment">//! IN THE SOFTWARE.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">//******************************************************************************************</span></span><br></pre></td></tr></table></figure>
<h2 id="1_头文件防冲突宏">1 头文件防冲突宏</h2><p><strong>原则</strong><br>用于防止头文件被多次包含，从而导致编译，链接错误</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/教程/">教程</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2014/11/16/coding-standard/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iar-warming-25-problem" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/28/iar-warming-25-problem/" class="article-date">
  	<time datetime="2014-10-28T12:30:05.000Z" itemprop="datePublished">2014-10-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/28/iar-warming-25-problem/">IAR Warming 25 Problem</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="出现问题">出现问题</h2><p>IAR版本之间不兼容是臭名昭著的问题，在IAR7.0版本完全正常的代码，放到IAR7.10版本中编译，会出现下面的警告</p>
<pre><code>Warning[<span class="number">25</span>]: Label <span class="string">'MemManage_Handler'</span> is defined pubweak <span class="keyword">in</span> <span class="tag">a</span> <span class="tag">section</span> implicitly declared root
</code></pre><h2 id="解决方案">解决方案</h2><p>在对应的SECTION声明中，添加<code>NOROOT</code>修饰信息，如下所示</p>
<p>由</p>
<pre><code>        PUBWEAK MemManage_Handler
        SECTION <span class="class">.text</span>:CODE:<span class="function"><span class="title">REORDER</span><span class="params">(<span class="number">1</span>)</span></span>
MemManage_Handler
        B MemManage_Handler
</code></pre><p>改为</p>
<pre><code>        PUBWEAK MemManage_Handler
        SECTION <span class="class">.text</span>:CODE:REORDER:<span class="function"><span class="title">NOROOT</span><span class="params">(<span class="number">1</span>)</span></span>
MemManage_Handler
        B MemManage_Handler
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IAR/">IAR</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-qt-chinese-decoder" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/25/qt-chinese-decoder/" class="article-date">
  	<time datetime="2014-10-25T15:25:19.000Z" itemprop="datePublished">2014-10-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/25/qt-chinese-decoder/">QT5 VS2013 中文乱码问题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="问题">问题</h2><p>QT4中的中文乱码问题，可以通过在实例前增加下面代码来解决</p>
<pre><code><span class="rule"><span class="attribute">QTextCodec</span>:<span class="value">:<span class="function">setCodecForTr</span>(QTextCodec::<span class="function">codecForLocale</span>())</span></span>;
</code></pre><p>但QT5中，取消了这个函数，又该如何解决呢</p>
<h2 id="解决方案">解决方案</h2><p>经测试，只要是源代码文件采用UTF8编码（不带签名）保存，不需要添加任何代码，就可以显示中文</p>
<p>VS2013需要设置如下</p>
<pre><code>FILE-&gt;Advanced Save <span class="built_in">Option</span>-&gt;Encoding-&gt; UTF8 without signature - Codepage <span class="number">65001</span>
</code></pre><p><img src="!--￼0--&gt;/images/2014/10/25/vs2013_utf8.png" alt=""></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/QT/">QT</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iar-keep-unused-section" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/16/iar-keep-unused-section/" class="article-date">
  	<time datetime="2014-10-16T13:43:29.000Z" itemprop="datePublished">2014-10-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/16/iar-keep-unused-section/">IAR中保留未用代码段</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="现有问题">现有问题</h2><p>在嵌入式软件中，经常会用数组保存一些备用信息，也许会存在Flash里面，在Application中用偏移地址来访问这些数据，那么问题就来了，当提高优化级别的时候，编译器会将无用的符号（变量/函数/数组）优化掉，这不是我们所希望看到的结果。</p>
<p>该如何解决这个问题呢？</p>
<h2 id="解决方案">解决方案</h2><p>在IAR中，有4个解决方法</p>
<h3 id="1：keep">1：keep</h3><p>在链接器里面手工添加需要保留的符号<br><img src="!--￼2--&gt;/images/2014/10/16/Link Keep.png" alt=""></p>
<h3 id="2：_root">2： root</h3><figure class="highlight c"><figcaption><span>示例代码</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__root <span class="keyword">int</span> UnusedData[<span class="number">10</span>];</span><br></pre></td></tr></table></figure>
<h3 id="3：_required">3： required</h3><figure class="highlight c"><figcaption><span>示例代码</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> UnusedData[<span class="number">10</span>];</span><br><span class="line"><span class="preprocessor">#<span class="keyword">pragma</span> required=UnusedData</span></span><br></pre></td></tr></table></figure>
<h3 id="4_：_禁用编译器Remove优化">4 ： 禁用编译器Remove优化</h3><p>可以在链接器配置extra options页中，通过输入下面的选项来禁用编译器remove优化</p>
<pre><code>-<span class="ruby">-no_remove
</span>-<span class="ruby">-no_fragments</span>
</code></pre><p>如图所示<br><img src="!--￼3--&gt;/images/2014/10/16/Disable Remove Option.png" alt=""></p>
<h2 id="注意事项">注意事项</h2><p>1：本文仅适用于IAR，如果您适用MDK，请参考编译器手册<br>2：如果您希望测试是否生效，请将编译器优化级别提高到最高(O3)，然后在调试模式下，查看变量，如果不存在，则被编译器优化掉；反之，则符号存在。<br>3：如果您有任何疑问，欢迎交流</p>
<p><strong>全文完，希望本文对您有帮助^_^</strong></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IAR/">IAR</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-use-swd-interface-to-measure-time" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/16/use-swd-interface-to-measure-time/" class="article-date">
  	<time datetime="2014-10-16T13:38:17.000Z" itemprop="datePublished">2014-10-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/16/use-swd-interface-to-measure-time/">用SWD调试接口测量代码运行时间</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="关于时间测量的种种问题">关于时间测量的种种问题</h2><p>在嵌入式中，我们经常需要测量某段代码的执行时间或测量事件触发的时间，常规的思路是：</p>
<p>1：在测量起始点，反转电平<br>2：在测量结束点，再次反转电平</p>
<p>然后通过示波器或者逻辑分析仪来测量反转间隔，也就是代码时间</p>
<p>这种方法，在测量两个或多个时间信号同步的时候，非常有用，实际上，这也是唯一的方法。</p>
<p>但是如果在测量中，其它代码也会控制这个管脚电平或者周期性动作，这时便需要在&lt;动作1&gt;之前<br>增加前导码，从而便于在繁杂的波形中，一眼识别出需要特定的波形</p>
<p>同时，如果测量的时间值非常小，那么用示波器即便可以识别，但不容易捕获</p>
<h2 id="SWD解决方案">SWD解决方案</h2><p>在ARM Cortex-M 芯片中，用SWD调试接口取代了传统的JTAG调试接口，从而占用MCU更少的管脚，同时提高了调试性能。</p>
<p>SWD由四根线组成，SWO，SWDIO，SWCLK，GND；SWDIO和SWCLK组成了基本的串行调试接口，SWO则提供一个信息输出通道，<br>可以输出很多信息，比如指令的执行时间或者ISR触发事件，所以我们可以通过SWD接口配合IDE来获取代码执行时间，从而在某种程度上取代示波器</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/SWD/">SWD</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2014/10/16/use-swd-interface-to-measure-time/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-preinc-and-postinc-problem" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/16/preinc-and-postinc-problem/" class="article-date">
  	<time datetime="2014-10-16T09:27:18.000Z" itemprop="datePublished">2014-10-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/16/preinc-and-postinc-problem/">C语言获取循环数</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在很多时候，我们需要循环序列，比如循环读取数组的8个元素，便需要索引指针(index)从0-7-0变化，<br>常规而言，会写出下面的代码</p>
<figure class="highlight c"><figcaption><span>if 语句</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (++index &gt;= <span class="number">8</span>)</span><br><span class="line">&#123;</span><br><span class="line">    index = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight c"><figcaption><span>？表达式</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index = (++index &gt;= <span class="number">8</span>)? <span class="number">0</span>:index;</span><br></pre></td></tr></table></figure>
<p>观察到这是连续循环操作，所以我们可以用<code>%</code>的方式，来省掉一个判断语句，如下所示</p>
<figure class="highlight c"><figcaption><span>取余语句</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index = (++index)%<span class="number">8</span>;</span><br></pre></td></tr></table></figure>
<p>因为<code>++</code>优先级高于<code>%</code>，所以进而简化为<br><figure class="highlight c"><figcaption><span>正确写法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index = ++index%<span class="number">8</span>;</span><br></pre></td></tr></table></figure></p>
<p><strong>特别注意：</strong> 这里是前置递加操作，不要写成后置，如下所示<br><figure class="highlight c"><figcaption><span>错误写法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index = index++%<span class="number">8</span>;</span><br></pre></td></tr></table></figure></p>
<p>如果写成后置的，会出现什么情况呢？</p>
<p>分别将二者反汇编（ARM反汇编），如下所示</p>
<figure class="highlight c"><figcaption><span>错误写法 index = index++%8</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MOVS      R1, <span class="preprocessor">#<span class="number">8</span></span></span><br><span class="line">MOVS      R0, R4</span><br><span class="line">UDIV      R4, R0, R1</span><br><span class="line">MLS       R4, R4, R1, R0</span><br><span class="line">ADDS      R4, R4, <span class="preprocessor">#<span class="number">1</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>正确写法 index = ++index%8</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ADDS      R4, R4, <span class="preprocessor">#<span class="number">1</span></span></span><br><span class="line">MOVS      R0, <span class="preprocessor">#<span class="number">8</span></span></span><br><span class="line">UDIV      R1, R4, R0</span><br><span class="line">MLS       R1, R1, R0, R4</span><br><span class="line">MOVS      R4, R1</span><br></pre></td></tr></table></figure>
<p>翻译成C语言如下</p>
<figure class="highlight c"><figcaption><span>错误</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">index = index%<span class="number">8</span>;</span><br><span class="line">index = index + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>正确</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">index = index + <span class="number">1</span>;</span><br><span class="line">index = index%<span class="number">8</span>;</span><br></pre></td></tr></table></figure>
<p>编译器不支持取余运算，所以需要数学计算，取余等于</p>
<pre><code><span class="keyword">A</span>%B = <span class="keyword">A</span> - (<span class="keyword">A</span>/B）*B
</code></pre><p>对此，不做过多解释，重点关注ADD那句的位置，正确的表达式会先计算index的值，然后再取余；<br>而错误的，则先取余，再递增；</p>
<p>所以，正确的语句<code>index = ++index%8</code>会输出<code>0 - 1 - 2 ... 7 - 0</code>序列，错误的会输出<code>1 - 2 ... 7 - 8 - 1</code>序列</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/C-语言/">C 语言</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-knowledge-about-oscilloscope-probe" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/11/knowledge-about-oscilloscope-probe/" class="article-date">
  	<time datetime="2014-10-11T14:11:19.000Z" itemprop="datePublished">2014-10-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/11/knowledge-about-oscilloscope-probe/">示波器探头知识--衰减率</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天在使用示波器XY通道的时候，发现两个信道不同步，衰减比例不一样，导致信号误差</p>
<p>特此写个博客记录1X/10X衰减率的应用场合，以免下次误用</p>
<ul>
<li><p>1X<br>信号未经衰减直接经过探头传输至示波器，其耐压能力不及其它无源探头，但它具备测试小信号的优势。由于不像10：1衰减比探头那样信号需要示波器再放大10倍显示，所以示波器内部噪声未放大，测量噪声更小，此类更适用于测试小信号或电源纹波噪声</p>
</li>
<li><p>10X<br>具备高阻抗10MΩ，因此它对待测电路的负载效应很小，能覆盖一般低频频段（500MHz以内），耐压能力强（300V-400Vrms），价格便宜，通用性好，所以得到广泛使用</p>
</li>
</ul>
<p>更高衰减率的探头归类为<strong>无源高压探头</strong>， 适合测量高压，超高压电信号</p>
<h3 id="参考资料">参考资料</h3><ul>
<li><a href="!--￼0--&gt;/assets/2014/10/11/Oscilloscope_Art.pdf">示波器的艺术</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/示波器/">示波器</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-mcu-software-framework" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/10/mcu-software-framework/" class="article-date">
  	<time datetime="2014-10-10T13:35:15.000Z" itemprop="datePublished">2014-10-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/10/mcu-software-framework/">嵌入式软件裸机框架</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>嵌入式平台和PC平台的很大区别是定制化，可以不用操作系统来执行代码，这就带来了一个问题：软件中，需要延时时，死等会让MCU空转，其它任务无法执行，因此，很多人着手解决这个问题。</p>
<p>大致的思路是：将长时间延时分解为小段，然后设置标志位和记录状态，不断查询，在需要延时等待的时候，主动放弃MCU；让其它任务得以执行；不同模块间用消息来传递<br><strong>专业术语叫做：状态机+消息分发</strong></p>
<p>这是一个引子，后面会详细来写文章分析各类框架的利弊，以助大家在实际项目中，合理使用</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/杂谈/">杂谈</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-push-blog-source-to-github" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/09/push-blog-source-to-github/" class="article-date">
  	<time datetime="2014-10-09T15:17:25.000Z" itemprop="datePublished">2014-10-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/09/push-blog-source-to-github/">定时备份Blog源文件到github</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言">前言</h2><p>hexo框架是一款非常好用的blog生成工具，可以方便的将markdown转换成HTML网页，并传到github.io网站。<br>但是hexo在push的时候，只会推送public目录下的文件到远程master分支，而不会保存源文件和网站主题，<br>这样会导致风险，万一哪天我们的markdown文件挂掉，就仅仅剩github的网页文件了，所以定时将源文件备份到github是个好习惯</p>
<h3 id="1：创建本地仓库">1：创建本地仓库</h3><p><code>cd</code>进blog所在目录，输入下面命令将文件纳入git管理系统</p>
<pre><code>git init
git add .
git <span class="operator"><span class="keyword">commit</span> -<span class="keyword">m</span> <span class="string">"first commit"</span>    </span>
</code></pre><h3 id="2:_删除远程source分支">2: 删除远程source分支</h3><p>如果您是从octopress转过来的，那远程仓库中，默认会存在一个source分支；而hexo不会自动push到source，所以<br>这个分支是很久以前的文件，这里我们将删掉</p>
<pre><code>git <span class="keyword">push</span> &lt;远程仓库地址&gt; :<span class="keyword">source</span>
</code></pre><p>比如我的地址是<code>https://github.com/cedar-renjun/cedar-renjun.github.io.git</code>，则上述命令是</p>
<pre><code>git push <span class="symbol">https:</span>/<span class="regexp">/github.com/cedar</span>-renjun/cedar-renjun.github.io.git <span class="symbol">:source</span>
</code></pre><p><strong>注意</strong> <code>:</code>之前有一个空格</p>
<p>上面的命令太长了，不好输入，我们可以用<code>remote</code>来简化输入</p>
<pre><code>git remote <span class="built_in">add</span> blog http<span class="variable">s:</span>//github.<span class="keyword">com</span>/cedar-renjun/cedar-renjun.github.io.git
</code></pre><p>这样，blog就是远程的仓库地址，我们可以用下面命令来检测是否生效</p>
<pre><code><span class="title">git</span> remote -v
</code></pre><h3 id="3：创建本地分支">3：创建本地分支</h3><pre><code><span class="label">git</span> <span class="keyword">branch </span>-<span class="keyword">b </span>source
</code></pre><p>这个命令，创建了一个souce分支，并切换到source分支了</p>
<h3 id="4：推送到远程分支">4：推送到远程分支</h3><pre><code>git <span class="keyword">push</span> blog <span class="keyword">source</span>:<span class="keyword">source</span>
</code></pre><p>前一个<code>source</code>表示本地分支名字，后一个表示远程仓库名字，名字可以变，但位置不能变</p>
<p>至此，我们已经将source文件推送到远程分支，可以高枕无忧了 ^_^</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/github/">github</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-mbed-iot-device-platform" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/10/09/mbed-iot-device-platform/" class="article-date">
  	<time datetime="2014-10-09T14:23:27.000Z" itemprop="datePublished">2014-10-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/09/mbed-iot-device-platform/">Mbed IoT Device Platform</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong><br>Mark：ARM推出了Mbed平台，试图统一IOT平台，原来看过Mbed的源码，写的很赞，用C++做封装，事件调度机制，非常适合小型系统，最近又看到它们支持各种协议栈，和Thread一样，借助大企业平台的优势，Mbed以后会发展的很好，特此转发ARM文章
</strong></p>
<p><br/></p>
<p><img src="!--￼0--&gt;/images/2014/10/09/ARM-mbed-IoT-platform.png" alt=""></p>
<h2 id="About_Mbed">About Mbed</h2><p>The Internet of Things (IoT) is about devices and services delivering end-to-end solutions. <a href="http://mbed.org/">The ARM® mbed™ IoT Device Platform</a> is the fastest way to create commercial and interoperable connected IoT devices based on ARM microcontrollers. Interoperability between nodes and cloud services across market segments will unleash the full potential of the IoT. Although the IoT market is made up of many vertical segments, most applications that can make use of Internet connected devices have a common foundation. For example - smart cities, basic wearables and smart home devices require basic OS functionality like drivers, device security and provisioning support. In addition, network connectivity varies from application to application, in general however, the IP networking, security, application layer and device management needs are all common.</p>
<p>The ARM mbed IoT Device Platform provides all the key ingredients to build secure and efficient IoT applications through ARM’s mbed OS, mbed Device Server and mbed Community Ecosystem.</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Mbed/">Mbed</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2014/10/09/mbed-iot-device-platform/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-analysis-of-zigbee-led-module" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/23/analysis-of-zigbee-led-module/" class="article-date">
  	<time datetime="2014-09-23T10:23:26.000Z" itemprop="datePublished">2014-09-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/23/analysis-of-zigbee-led-module/">Z-Stack协议栈分析-LED模块</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言">前言</h2><p>TI的Zigbee协议（Z-Stack）是典型的事件驱动系统，整个系统分为多个任务，各自任务内部采用状态机非阻塞似的完成任务，<br>完成后，主动释放MCU控制权；下层的任务或异步事件产生的事件，将其封装成事件消息+数据，然后发送到事件处理函数，<br>在事件处理函数中，也是采用状态机的形式分发消息并处理。</p>
<p>这就是所谓的协作式调度器，它的好处，是避免了传统RTOS的重型线程调度和资源保护机制，从而可以做到无锁资源保护机制<br>和极度轻量化，节省RAM/ROM</p>
<p>关于这点，后面会详细的讨论，这里重点讨论HAL层的LED机制</p>
<p><strong>注：对于HAL层的实现机制，会另有专门的文章来讨论这个话题</strong></p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/教程/">教程</a><a class="article-category-link" href="/categories/教程/Zigbee/">Zigbee</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2014/09/23/analysis-of-zigbee-led-module/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-good-blog-about-coroutines" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/21/good-blog-about-coroutines/" class="article-date">
  	<time datetime="2014-09-21T09:07:39.000Z" itemprop="datePublished">2014-09-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/21/good-blog-about-coroutines/">谈谈协程和C语言的协程</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>注：</strong> 本文转自 <a href="http://www.yeolar.com/note/2013/02/17/coroutines/">http://www.yeolar.com/note/2013/02/17/coroutines/</a></p>
<p>晚上在整理我的 $HOME 的时候，发现了一段有趣的代码，它被保存为了a.c并存在了差不多半年之久。种种迹象表明，它很重要。其实我记得它，当初在网上看到，觉得它包含了一个巧妙的技巧，就让它长住在我的硬盘上了，今天我决定把它搬到这篇文章中。好吧，我是打算谈一谈协程的概念。</p>
<h2 id="一个例子">一个例子</h2><p>先给大家看一下这段代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">int</span> state;</span><br><span class="line">&#125; task;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">define</span> crBegin(state) \</span><br><span class="line">        switch (state) &#123; case <span class="number">0</span>:</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">define</span> crReturn(state, ret) \</span><br><span class="line">        (state) = __LINE__; return (ret); case __LINE__:</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">define</span> crEnd() \</span><br><span class="line">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cb</span><span class="params">(task *t)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    crBegin(t-&gt;state);</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">        t-&gt;num = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (t-&gt;i = <span class="number">0</span>; t-&gt;i &lt; <span class="number">20</span>; t-&gt;i++) &#123;</span><br><span class="line">            crReturn(t-&gt;state, t-&gt;num);</span><br><span class="line">            t-&gt;num += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    crEnd();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    task t;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line"></span><br><span class="line">    t.state = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, cb(&amp;t));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/转载/">转载</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2014/09/21/good-blog-about-coroutines/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-state-machine-timer-resource-management" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/17/state-machine-timer-resource-management/" class="article-date">
  	<time datetime="2014-09-17T07:00:29.000Z" itemprop="datePublished">2014-09-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/17/state-machine-timer-resource-management/">在状态机中管理时间资源</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="写在前面的话">写在前面的话</h2><p>在嵌入式系统中，经常会使用到延时(Delay)函数，延时有长，有短；500us以下的延时，可以完全用软件来做；较长的延时，可以用硬件Timer或者调用RTOS的时间管理函数。</p>
<p>在简单的MCU中，由于资源限制，无法使用常规的RTOS，这时就需要自己写相应的协调式调度算法，常见的有协程和时间片轮询机制等，万变不离其宗，它们其中的核心是状态机，在状态机中一个核心原则是：<strong>函数不能长时间阻塞MCU</strong>，否则就会导致整个系统调度失效。也就是说：<strong>无法使用纯软件延时</strong></p>
<p>例如，在系统中严禁出现下面代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_s</span><span class="params">(uint8_t tick_s)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Code Snippet 1</span></span><br><span class="line"></span><br><span class="line">delay_s(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Code Snippet 2</span></span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/教程/">教程</a><a class="article-category-link" href="/categories/教程/框架/">框架</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2014/09/17/state-machine-timer-resource-management/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-missing-you" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/01/missing-you/" class="article-date">
  	<time datetime="2014-09-01T14:33:39.000Z" itemprop="datePublished">2014-09-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/01/missing-you/">那些人，珍重便好</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote><p>“人生有时候，总是很讽刺。一转身可能就是一世。说好永远的，不知怎么就散了。最后自己想来想去竟然也搞不清当初是什么原因分开彼此的。然后，你忽然醒悟，感情原来是这么脆弱的。经得起风雨，却经不起平凡；风雨同船，天晴便各自散了。也许只是赌气，也许只是因为小小的事。幻想着和好的甜蜜，或重逢时的拥抱，那个时候会是边流泪边捶打对方，还傻笑着。该是多美的画面。没想到的是，一别竟是一辈子了。”</p>
<footer><strong>张爱玲 《有些人我们一直在错过》</strong></footer></blockquote>
<pre><code>有些人，渐行渐远
有些人，来去如风
有些人，或许不会再见
有些人，珍重便好
</code></pre><p>某年回家，在车上偶遇多年未见的同学，一路上聊起来，我问他是怎么认出我来的，他说：“这些年你都没有怎么变”，我笑笑说：“还是跟以前一样傻逼吧”，他也笑笑。他说：“你现在在哪工作”，“武汉读书”，忽然他就提高了音调，“还在读书呀，读大学吧，你看你都读老了，不要读成书呆子”，接着自顾自地说了一堆，“我们打工的那个厂里面一堆大学生，你看现在，什么都缺，就是不缺大学生，读书有什么用，你读出来还不是跟我一样去打工……”听着他唠叨了一大堆，我就只有颔首而笑的份，我明白，我只有用笑容来表示我对他的尊重。下车前，我们互留了电话号码，告别以留下“常联系”这句话后的背影作为结束。号码也只是藏在电话本里的某个角落，只有在过年的时候才会互道一声问候，虽然想打电话联系，但是不知道说什么好，怕尴尬，怕那种只能挤出牙缝的陌生，索性在某次清理通讯录的时候，我把他从我的通讯录里删除了。</p>
<p>这让我想起了我一位高中同学，很长一段时间，我和他坐同桌。他平时就是打篮球，上网和睡觉，篮球打得很棒，各方面也不错，但是有一点，就是不喜欢学习，考试都是比较糟糕。曾想过帮他，但是后来发现这是一件很难的事情，人各有志，命里无时莫强求，也许学习这条路对于每个人并不是都是合适的，每个人都有适合自己的事做，最后高考考完他就消失了，填志愿的时候他也没来，还没来得及道别，后来QQ上也没见他上过线。常言道“天下没有不散的宴席”，但有时却是，宴席还没有摆上，还没来得及陪君醉笑三千场，不诉离殇，就有人抽身而去，连一个身影都没有留下。后来有一次，辗转了解到毕业后他就回家了，之后喜当爹了，现在孩子应该可以打酱油了吧，也不知道他现在在做什么，希望应该比学习有趣吧。</p>
<p>打开邮箱，看到同学发来的这样一份邮件，“毕业的，没毕业的，上班的，没上班的，我们都开始忙碌了；好像越来越少有时间，去问候和想念；会不会有天，我们真的都忘记了彼此，遗忘了那些最美丽的回忆？我们曾在某个时间相遇，曾在某个时段某个时候，在一起。然后，因为这样那样的原因，我们不常联系。只是想轻轻地告诉你：我很好，希望你也很好。”看到这个心里觉得矫情，但我们终究会明白，每个人总会走上自己选择的路，不管怎样，还是希望听到他们的好消息。</p>
<p>在一个地方待得太久，就会渐渐的忘记时间，曾经以为这样的日子会长久，但终究在这样一个宁静的午后戛然而止。我们各自背上行囊，或许道一声珍重，或许相顾无言，各自奔走天涯。多年以后，你是否会记得那个喧嚣或者沉默的下午，那个远去的背影消失在遥远的尽头，那趟踏上远方的列车，我们各自转身，不再回头。可叹人世多错过，两人彼此遍寻不着，只存一份念想；淡淡的眷恋潜浮于眸，深深的情愫隐藏于心，在时间里慢慢发酵，酝酿出那一番醇香。王家卫导演在解释《一代宗师》张震的戏份太少时曾说过，有时候生命中遇见一些人，但之后就再也没见到过了，这是一部分的人生。</p>
<p>我们从久远走来，相濡以沫或者相忘于江湖，江南说：江湖是这么一个地方，你在这里生，也不介意在这里死去。可你想过没有，多年以后，或许江湖还是那个江湖，你已不是当年的那个你，曾经的那些美好都成为了过往，就算时光真的可以倒流，你会发现，一切早已经面目全非。所有的相遇，都是久别重逢，那么所有的重逢，都是时光之约，里面装满了风尘与岁月。</p>
<p>最后，这些东西都慢慢的幻化成回忆，这个世界有太多我们无能为力的东西，回不到的过去，无法预知的未来，以及那些那些再也没有见到过的人……</p>
<p>如果哪天那些人和你从此不会再见了，不是有一些新的人取而代之了，新的阶段出现了，就是遥远的我们都“懒”了。</p>
<p>曲终人会散，人走茶会凉，最后，收拾心情，背上行囊，继续上路。</p>
<p>文/阿飞 <a href="http://www.douban.com/note/295698799/" target="_blank" rel="external">http://www.douban.com/note/295698799/</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/杂谈/">杂谈</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-can-not-read-cpuid-via-jlink-in-iar" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/06/04/can-not-read-cpuid-via-jlink-in-iar/" class="article-date">
  	<time datetime="2014-06-04T07:18:27.000Z" itemprop="datePublished">2014-06-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/04/can-not-read-cpuid-via-jlink-in-iar/">IAR环境下，Jlink调试报错，提示&lt;无法读取CPUID&gt;</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题描述">问题描述</h3><p>在IAR 6.3中，使用Jlink调试Cortex-M芯片的时候，无法正常调试，报错</p>
<pre><code>Can <span class="keyword">not</span> <span class="command">read</span> CPUID
</code></pre><p>为CPU重新上电，则可以正常进入调试状态</p>
<h3 id="出现原因">出现原因</h3><p>IAR Jlink DLL版本过低</p>
<h3 id="解决方案">解决方案</h3><p>用最新版的<code>JlinkARM.dll</code>替换掉IAR安装目录下默认的<code>JLinkARM.dll</code></p>
<p>附：我的jlinkarm.dll路径如下，不同电脑路径可能不一致，注意区分</p>
<p>1：Jlink软件JlinkARM.dll路径</p>
<pre><code>C:<span class="command">\Program</span> Files (x86)<span class="command">\SEGGER</span><span class="command">\JLinkARM</span>_V474b
</code></pre><p>2：IAR安装目录JlinkARM.dll路径</p>
<pre><code>C:<span class="command">\Program</span> Files (x86)<span class="command">\IAR</span> Systems<span class="command">\Embedded</span> Workbench 6.0<span class="command">\arm</span><span class="command">\bin</span>
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IAR/">IAR</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jlink/">Jlink</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/教程/">教程</a><a class="article-category-link" href="/categories/教程/IAR/">IAR</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-personal-and-platform" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/05/29/personal-and-platform/" class="article-date">
  	<time datetime="2014-05-29T04:48:16.000Z" itemprop="datePublished">2014-05-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/29/personal-and-platform/">个人与平台</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote><p>总结自己短暂却又不失跌宕的职业生活（没敢说生涯），尤其到了今年，所有重要抑或不重要的故事勾勒出一幅画面。随着自己的不断进步，却发现越来越多的无奈，不断坚持后，又随着事务的不断解决，越来越悟出一个道理：个人，要想进步，必须要有个适合你的平台。</p>
<footer><strong>divivy</strong><cite><a href="http://blog.sina.com.cn/divivy" target="_blank" rel="external">Divivy's Heaven</a></cite></footer></blockquote>
<pre><code>注：原文转载自 &lt;<span class="string">http:</span><span class="comment">//blog.sina.com.cn/s/blog_414bbec30100gepf.html&gt; ，转载请注明原出处</span>
</code></pre><p>有朋友EMAIL我说：“我现在在的公司里我能力最强（我笑），每天干的最多，老板是很倚重我，但又不肯给我想要的待遇。不想做了，跳一跳，到时候让老板知道没我了他会多后悔。”  </p>
<p>我没正面回应他，因为我知道那种感觉不是几句话能够说动的。后来他告诉我说，他走了，去了另外一个公司，发现事情有些不按照自己想法前进。新的公司更加过分，原来的公司在自己走了后自己本来一个部门的竞争对手竟然升到了部门经理，待遇直接翻倍了。不胜后悔！</p>
<p>对于这种事情，我个人是有着切身体会的。在毕业后第一个公司时，每天我做的最多的事情就是感慨自己的“怀才不遇”，认为自己应该是理所应当的领导，为什么却要天天去做那些随便一个初中生都可以做的琐碎工作。于是消极抵抗，甚至无心工作，最后结果是一些小的事情都做不好，却让领导更加反感。最后选择离开！</p>
<p>公司的老总在我离职后也许嗅到了一些味道，两个同来的都迅速的升职，一个做项目经理一个做了技术部副经理，待遇也是随之上涨。当然我并不后悔，不过这也是后话了。当时还是有些小后悔的！</p>
<p>以上两个故事说明一个什么问题呢？那就是：<strong> 对于一个公司，你自己远远没有你想的那么重要！</strong></p>
<p>如果有合作公司老板打电话给你要你过去，待遇要比现在高，你怎么办？我的直观反应会是：“你要知道你是凭借什么才有这种资格接到这种电话。当然，你的努力和能力很重要，但是如果没有公司这个大平台，你会有今天吗？没有今天，你怎么能让别人认可你。人要学会感恩。即使对方开出的价码实在让你无法拒绝，但是你还要考虑一个你过去后能够适应的问题。”</p>
<p>再就是在个体中表现最为强烈的一种“意识形态”了。对于成立时间并不长的公司，人才，尤其是合适的人才是非常重要的。不一定要求对方的能力强到世界第一，而是要合适。公司从成立到现在，发掘了很多“合适”的人才。他们在进公司后，凭借自身努力和公司提供的宽松环境，将自己的能力发挥的淋漓尽致，为公司成长立下了汗马功劳的同时，个人能力也不断进步。</p>
<p>新公司局限于资源和自身条件，很难去储备较多的管理人才。所以招来的每个人都是依据公司缺人的职位，不断甄选，最终找到符合该职位的人选，可谓“一个钉子一个铆”。这样造成的结果有正反方面两个，一是这个人越来越合适这个工作，工作手法越来越熟练，越来越得心应手，效率更高；另一方面，随着公司的更加倚重，他听到的夸赞越来越多。这种夸赞渐渐就让人内心深处出现了“骄傲”的情绪，滋长着“没我不行”的呐喊。<br>这时候对于双方，无论公司或者个人，都是比较危险的时刻。</p>
<p>对于个人，因为觉得自己的“不可或缺”，就会产生多种复杂思维。就好像一个得了“肥胖症”的患者，接下来就会诱发如高血压、高血脂、高血糖、糖尿病等各类并发症。他们会理所当然的认为自己既然如此重要，那么老板你要提高我的职位，你要给我更高的待遇，你要给我更大的管理权力，你要给予我更多的尊重；他们会在和同事相处时表现的更加咄咄逼人，更加的骄傲和难以接受；他们会在处理工作时表现的更加眼高手低，觉得自己应该做更高一层的职位。武断的自我抬高会让自己的虚荣心不断上升，处理事务更加的独断和难以接受，他们会尝试着插手别人的分内事务，从而引起同事的不满，继而是失误的增多和更多的人心向背。</p>
<p>对于公司，培养一个合适的人选不容易。看着自己辛苦培养出来的人如此的自我膨胀，却无计可施。因为你不可能答应他的条件，否则以后他会更加不可一世，别人看到后也会群起而仿效。但是看着他越滑越远，最难过的应该是公司一方。如果这个人走了，结果应该是“双输”。</p>
<p>但是个人请永远不能低估公司作为一个平台的强大造血功能和新陈代谢能力。新公司对于一个“合适”的人离去是可以接受的，因为所有“合适”的人在同时间离开可能性不是没有，但概率却是很小的。你走了，我需要做的也许只是去再招人。也许短时间内会有些贫血，但只要人找到了，再经过培养，依然可用，造血只是个迟早的过程。而平台其他血细胞，在这种关键时刻也是完全可以到达失血位置支援的。</p>
<p>这个时候我们返回来去思索一下，作为一个个体，应该如何正确处理自己作为一个和公司这个平台的关系。总结自己的个人经验，提出如下几点：</p>
<h3 id="一、打倒自己心中的鬼，让自己变得一文不值">一、打倒自己心中的鬼，让自己变得一文不值</h3><p><strong>记住，不管到哪里，什么时候，自己永远没有自己想的那么重要</strong>。没有那个地方没你不行，没你地球照转，太阳天天东升西落。千万不要让自己觉得自己可以扭转地球自转的规律。平台是个大机器，而且随着不断进步，内部机械运转更加趋于合理，强大的机制才是真正的内核和发动机。个体只不过是这个巨大机器上的一颗螺丝钉，螺丝钉之于发动机，相差了N个数量级样的光年。平台和个人同时发展，大家各司其职，发动机性能更加优越，螺丝钉越来越牢固，机器运转才会越来越稳定。你有没有想起雷锋叔叔？</p>
<h3 id="二、做好自己分内的事，先把平台推上去">二、做好自己分内的事，先把平台推上去</h3><p>一个人的价值体现是随着平台的不断进步而不断提高的。试想现在你是一个一文不名的小公司项目经理，没人知道你，你说出去别人会说：“你们能按月发工资吗？”若干年后，你的公司成了万科级别的公司，别人看你那叫高山仰止。要想自己站得高，首先要先努力把平台推上去。做好自己分内的工作，同时尽量站在自己上一级领导的位置去思考，你能取得平台和个人同步提升。</p>
<h3 id="三、平台有多高，你就能看多远">三、平台有多高，你就能看多远</h3><p>也就是常说的“屁股决定脑袋”。如果你仅仅是个小职员，你认识的人就很难有项目经理或者部门主管。如果你是项目经理，你也很难接触到其他公司的高管或者老总。但是如果把你放在高官的位置，你处理事务时，思路就会比站在项目经理或者普通职员位置上更加开阔。这时，你就能理解，为什么有时候接到上边的指令之初会觉得难以执行，但做着做着就渐渐的开始佩服。当然，给你这个平台，前提是你要有相当的能力。给一个科员水平的人去坐处长的位子，那叫勉为其难，那不是在提拔人，是在糟践人。</p>
<h3 id="四、永远不要骄傲">四、永远不要骄傲</h3><font color="red"> <strong> 一个人成功的程度，取决于其控制性格中不好方面的能力。</strong> </font>

<p>骄傲，是所有人都有的性格。但是就像自负和自信一样，稍不留意，你就会骄傲的让自己摸不到头脑。骄傲，会让你失去细心，严谨，脚踏实地等一系列的优秀性格，你会觉得自己不可一世。</p>
<p>也许你还没有到觉得“没你不行”的地步，但是你自己想想自己是否有以下表现中的一种或者几种：</p>
<ul>
<li>你是不是越来越不想听你上级的指令了，越来越觉得他是错的</li>
<li>你是不是越来越懈怠，可以玩物丧志，可以不重视公司的纪律</li>
<li>你是不是越来越听不进别人的话了，对上级的指令感觉越来越刺耳</li>
<li>你是不是越来越开始游离于公司管理制度的灰色地带</li>
<li>你是不是开始对同级或者下属在生活中开始更多“命令式”的说话</li>
</ul>
<p>自控和自我反省能力是一个人要做好事情的基本前提。尤其对于“塑形期”的年轻人。尤其现代社会，压力大，人会变得越来越浮躁，没有方向感和归属感。所以要多看书，多学习，多做有意义的事情，切忌不要沉迷于某种不好的事物或者情绪中。</p>
<p>世界因你而动，follow your heart，多倾听自己内心的声音，让自己变得更加的强大后，你才会有更多维和正确的选择观。</p>
<p>让我们一起努力吧！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/转载/">转载</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 Do one thing and do it well
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>